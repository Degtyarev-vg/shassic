'use strict';

$(function () {

  // Magnific Popup
  // $('.popup-with-move-anim').magnificPopup({
  $('.popup-with-zoom-anim').magnificPopup({
    type: 'inline',

    fixedContentPos: false,
    fixedBgPos: true,

    overflowY: 'auto',

    closeBtnInside: true,
    preloader: false,

    midClick: true,
    removalDelay: 300,
    // mainClass: 'my-mfp-slide-bottom'
    mainClass: 'my-mfp-zoom-in'
  });
});

'use strict';

$(function () {

  function eventCheck(e) {
    var container = $('.top-menu ul');

    if (!container.is(e.target) && container.has(e.target).length === 0 && !$(e.target).hasClass('hamburger') && !$(e.target).hasClass('hamburger__btn')) {
      container.fadeOut();

      $('.hamburger').find('.hamburger__btn').removeClass('hamburger__btn_on');
    }
  }

  function regulationsForMq(mq) {
    if (mq.matches) {
      $('.hamburger').click(function () {
        $(this).find('.hamburger__btn').toggleClass('hamburger__btn_on');

        $('.top-menu ul').slideToggle();

        return false;
      });

      document.addEventListener('touchstart', eventCheck, false);
      document.addEventListener('click', eventCheck, false);
    }
  }

  var mq = window.matchMedia('screen and (max-width: 992px)');

  mq.addListener(regulationsForMq);

  regulationsForMq(mq);
});

'use strict';

$(function () {

  $('.catalog__btn-more').click(function () {
    $('.catalog ul').addClass('catalog-open');

    $(this).css('display', 'none');
    return false;
  });
});

'use strict';

'use strict';

$(function () {

  $('input[name=quantity]').bind('change keyup input click', function () {
    if (this.value.match(/[^0-9]/g)) {
      this.value = this.value.replace(/[^0-9]/g, '');
    }
  });

  $('input[name=quantity]').bind('focusout', function () {
    var length = this.value.length;

    if (length < 1 || this.value == 0) {
      this.value = 1;
    }
  });
});

'use strict';

$(function () {

  $('.models__btn-more').click(function () {
    $('.models__inner').addClass('models__inner_open');

    $(this).css('display', 'none');
    return false;
  });
});

'use strict';

$(function () {

  var popularSlider = $('.section-popular__list').slick({
    infinite: true,
    fade: false,
    autoplay: false,
    speed: 300,
    slidesToShow: 3,
    swipeToSlide: true,
    dots: false,
    adaptiveHeight: false,
    arrows: true,
    appendArrows: $('.section-popular__navigation'),
    prevArrow: '<span class=\'section-popular__prev\'></span>',
    nextArrow: '<span class=\'section-popular__next\'></span>',
    responsive: [{
      breakpoint: 1311,
      settings: {
        slidesToShow: 2
      }
    }, {
      breakpoint: 768,
      settings: {
        slidesToShow: 1
      }
    }]
  });
});

'use strict';

$(function () {

  $('.product').each(function () {
    $(this).find('.product__img').each(function () {
      var img = $(this).find('img').attr('src');

      $(this).css({
        'background': 'url(' + img + ') center no-repeat',
        'background-size': 'cover'
      });
    });
  });

  $('.product__img-slider').each(function () {
    $(this).slick({
      infinite: true,
      fade: false,
      autoplay: false,
      speed: 300,
      slidesToShow: 1,
      swipeToSlide: false,
      swipe: false,
      dots: false,
      adaptiveHeight: false,
      arrows: true,
      appendArrows: $(this).parent().find('.product__navigation'),
      prevArrow: '<span class=\'product__prev\'></span>',
      nextArrow: '<span class=\'product__next\'></span>'
    });

    var slideQuantity = $(this).slick('getSlick').slideCount;

    if (slideQuantity > 1) {
      $(this).parent().find('.product__quantity-images').css({ 'display': 'inline-block' }).html(slideQuantity);
    }
  });
});

'use strict';

$(function () {

  $('.section-card').each(function () {
    $(this).find('.section-card__img').each(function () {
      var img = $(this).find('img').attr('src');

      $(this).css({
        'background': 'url(' + img + ') center no-repeat',
        'background-size': 'cover'
      });
    });
  });

  $('.section-card__img-slider').each(function () {
    $(this).slick({
      infinite: true,
      fade: false,
      autoplay: false,
      speed: 300,
      slidesToShow: 1,
      swipeToSlide: true,
      swipe: true,
      dots: false,
      adaptiveHeight: false,
      arrows: true,
      appendArrows: $(this).parent().find('.section-card__navigation'),
      prevArrow: '<span class=\'section-card__prev\'></span>',
      nextArrow: '<span class=\'section-card__next\'></span>'
    });

    var slideQuantity = $(this).slick('getSlick').slideCount;

    if (slideQuantity > 1) {
      $(this).parent().find('.section-card__quantity-images').css({ 'display': 'inline-block' }).html(slideQuantity);
    }
  });
});

'use strict';

$(function () {

  function tabs(tabLink, tabsContainer, activeClass, contentContainer) {

    $(tabLink).click(function (e) {
      e.preventDefault();

      $(tabsContainer + ' .' + activeClass).removeClass(activeClass);

      $(this).parents('li').addClass(activeClass);

      var tab = $(this).attr('href');

      $(contentContainer).not(tab).css({ 'display': 'none' });

      $(tab).fadeIn(500);
    });
  }

  tabs('.tabs__link', '.tabs__nav', 'tabs__item_active', '.tabs__tab-content');
});

'use strict';

$(function () {

  $('.catalog-menu__open-menu').click(function () {
    $(this).toggleClass('catalog-menu__open-menu_active');

    $('.catalog-menu__content').slideToggle();

    return false;
  });

  function regulationsForMq(mq) {
    if (mq.matches) {

      $('.dropdown > a').click(function () {
        $(this).parent('.dropdown').toggleClass('open').find('ul').slideToggle();

        return false;
      });
    } else {
      $('.dropdown a').unbind('click');

      $('.dropdown').removeClass('open');

      $('.dropdown ul').css('display', 'none');
    }
  }

  var mq = window.matchMedia('screen and (max-width: 1310px)');

  mq.addListener(regulationsForMq);

  regulationsForMq(mq);
});

'use strict';

$(function () {

  $('.custom-select__drop-button').click(function () {
    var dropBlock = $(this).parents('.custom-select').find('.custom-select__drop-list');

    if (dropBlock.is(':hidden')) {
      dropBlock.slideDown();

      $(this).addClass('custom-select__drop-button_active');

      dropBlock.find('li').click(function () {
        dropBlock.find('.custom-select__drop-item_selected').removeClass('custom-select__drop-item_selected');

        $(this).addClass('custom-select__drop-item_selected');

        var selectResult = $(this).find('a').html(),
            selectValue = $(this).find('a').attr('href');

        $(this).parents('.custom-select').find('.custom-select__drop-hidden-input').val(selectValue);

        $(this).parents('.custom-select').find('.custom-select__drop-button').removeClass('custom-select__drop-button_active').html(selectResult);

        dropBlock.slideUp();

        return false;
      });
    } else {
      $(this).removeClass('custom-select__drop-button_active');

      dropBlock.slideUp();
    }

    return false;
  });

  $(document).click(function (event) {
    if ($(event.target).closest('.custom-select__drop-list').length) return;

    $('.custom-select__drop-list').slideUp('slow');

    $('.custom-select__drop-button').removeClass('custom-select__drop-button_active');

    event.stopPropagation();
  });
});

'use strict';

$(function () {

  if (localStorage.getItem('catalogView') == 'false' || localStorage.getItem('catalogView') == null) {
    $('.view__icon_tile').addClass('view__icon_active');

    $('.section-catalog__list').removeClass('section-catalog__list_horizontal');
  } else if (localStorage.getItem('catalogView') == 'true') {
    $('.view__icon_list').addClass('view__icon_active');

    $('.section-catalog__list').addClass('section-catalog__list_horizontal');
  }

  $('.view__icon_tile').click(function () {
    $('.section-catalog__list').removeClass('section-catalog__list_horizontal');

    $('.view__icon_list').removeClass('view__icon_active');

    $(this).addClass('view__icon_active');

    localStorage.setItem('catalogView', false);

    $('.product__img-slider').slick('refresh');

    return false;
  });

  $('.view__icon_list').click(function () {
    $('.section-catalog__list').addClass('section-catalog__list_horizontal');

    $('.view__icon_tile').removeClass('view__icon_active');

    $(this).addClass('view__icon_active');

    localStorage.setItem('catalogView', true);

    $('.product__img-slider').slick('refresh');

    return false;
  });
});

'use strict';

$(function () {

  $('.close-popup').click(function () {
    $.magnificPopup.close();
    return false;
  });
});